/* expression-change-history-view.component.css */

/* =========================================================
   Root
========================================================= */

.changeHistoryRoot {
  display: flex;
  flex-direction: column;
  min-height: 0;
  min-width: 0;
}

.changeHistoryEmpty {
  opacity: 0.7;
  font-style: italic;
  padding: 12px;
}

/* =========================================================
   Accordion Container (devtool panel)
========================================================= */

.changeHistoryAccordion {
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 12px;
  background-color: #26283a;
  overflow: hidden;
  min-height: 0;
  min-width: 0;
}

.changeHistoryAccordionScroll {
  max-height: 100%;
  overflow: auto;
  padding: 10px;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

/* =========================================================
   Change Set (flat list item + subtle active state)
========================================================= */

.changeSet {
  background-color: rgba(255, 255, 255, 0.02);
  border: 1px solid rgba(255, 255, 255, 0.06);
  border-radius: 10px;
  overflow: hidden;
}

.changeSet.isActive {
  border-color: rgba(92, 124, 250, 0.35);
  background-color: rgba(92, 124, 250, 0.06);
}

/* =========================================================
   Header (clear separation from body)
========================================================= */

.changeSetHeader {
  width: 100%;
  border: none;
  color: inherit;
  cursor: pointer;

  background-color: rgba(255, 255, 255, 0.04);

  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 14px;

  padding: 12px 14px;
  position: relative;
  text-align: left;
}

.changeSetHeader:hover {
  background-color: rgba(255, 255, 255, 0.06);
}

/* left accent for active selection */
.changeSet.isActive .changeSetHeader::before {
  content: '';
  position: absolute;
  left: 0;
  top: 8px;
  bottom: 8px;
  width: 3px;
  border-radius: 999px;
  background-color: rgba(92, 124, 250, 0.9);
}

.changeSetHeaderLeft {
  display: flex;
  align-items: center;
  gap: 10px;
  min-width: 0;
  flex: 1 1 auto;
}

.changeSetBadge {
  font-weight: 800;
  font-size: 12px;
  padding: 3px 8px;
  border-radius: 999px;
  background-color: rgba(255, 255, 255, 0.04);
  border: 1px solid rgba(255, 255, 255, 0.08);
  color: rgba(240, 240, 240, 0.9);
  flex: 0 0 auto;
}

.changeSetHeaderMeta {
  display: flex;
  align-items: baseline;
  gap: 10px;
  min-width: 0;
}

.changeSetExpr {
  font-weight: 800;
  font-size: 13px;
  color: #9cdcfe;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  min-width: 0;
  max-width: 100%;
}

.changeSetSteps {
  font-size: 12px;
  opacity: 0.75;
  flex: 0 0 auto;
}

/* Right side alignment (fixed column width for alignment) */
.changeSetHeaderRight {
  display: flex;
  align-items: center;
  gap: 10px;
  flex: 0 0 260px;
  justify-content: flex-end;
}

/* Chevron */
.changeSetChevron {
  display: inline-flex;
  justify-content: center;
  width: 20px;
  opacity: 0.65;
  transition: transform 180ms ease;
}

.changeSetChevron.isOpen {
  transform: rotate(90deg);
}

/* =========================================================
   Expanded Body
========================================================= */

.changeSetBody {
  padding: 6px 14px 8px 14px;
  border-top: 1px solid rgba(255, 255, 255, 0.08);
  background-color: rgba(0, 0, 0, 0.12);
}

/* =========================================================
   Value Diff (COMPACT: no stretching)
========================================================= */

.valueDiff {
  display: inline-flex;
  align-items: center;
  gap: 6px;

  white-space: nowrap;
  font-variant-numeric: tabular-nums;
}

.valueDiff.isHeader {
  font-size: 13px;
  font-weight: 700;
}

.valueDiff.isRow {
  font-size: 12px;
  font-weight: 700;
}

.valueDiffOld,
.valueDiffNew {
  text-align: right;
}

.valueDiffArrow {
  text-align: center;
  opacity: 0.75;
}

.valueDiffOld {
  color: rgba(255, 179, 179, 0.95);
}

.valueDiffNew {
  color: rgba(168, 240, 198, 0.95);
}

.valueDiffOld.isUnset,
.valueDiffNew.isUnset {
  opacity: 0.55;
  font-style: italic;
}

/* =========================================================
   Timeline + Steps (structural rail + flat rows)
========================================================= */

.changePath {
  display: flex;
  flex-direction: column;
  gap: 0;
}

/* each step is a row with a rail column */
.changeStep {
  display: grid;
  grid-template-columns: 26px 1fr;
  gap: 10px;
  min-width: 0;

  padding: 8px 0;
  border-bottom: 1px solid rgba(255, 255, 255, 0.06);
}

.changeStep:last-child {
  border-bottom: none;
}

.changeStepRail {
  position: relative;
  display: flex;
  align-items: flex-start;
  justify-content: center;
}

.changeStepDot {
  width: 10px;
  height: 10px;
  border-radius: 999px;
  background-color: rgba(255, 255, 255, 0.18);
  border: 2px solid rgba(255, 255, 255, 0.10);
  margin-top: 6px;
}

.changeStepDot.isTrigger {
  background-color: rgba(92, 124, 250, 0.95);
  box-shadow: 0 0 0 3px rgba(92, 124, 250, 0.12);
}

.changeStepLine {
  position: absolute;
  top: 18px;
  bottom: -8px;
  width: 2px;
  background-color: rgba(255, 255, 255, 0.10);
}

/* =========================================================
   Step Content (no card, just a row)
========================================================= */

.changeStepCard {
  border: none;
  background: transparent;
  border-radius: 0;
  min-width: 0;
}

.changeStepHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  min-width: 0;
}

.changeStepHeaderLeft {
  display: flex;
  align-items: center;
  gap: 8px;
  min-width: 0;
}

.changeStepExpr {
  font-weight: 800;
  font-size: 13px;
  color: #9cdcfe;
  min-width: 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.changeStepTag {
  font-size: 11px;
  padding: 2px 7px;
  border-radius: 999px;
  background-color: rgba(255, 255, 255, 0.04);
  border: 1px solid rgba(255, 255, 255, 0.08);
  color: rgba(240, 240, 240, 0.85);
  flex: 0 0 auto;
}

.changeStepTag.derived {
  opacity: 0.85;
}

.changeStepHeaderRight {
  flex: 0 0 260px;
  display: flex;
  justify-content: flex-end;
}